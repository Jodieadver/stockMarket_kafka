# use a propiate kafka server that's with more than 4 GiB
# public https: 16.171.181.77
# SSH client: ssh -i "kafka-stock.pem" ec2-user@ec2-16-170-201-99.eu-north-1.compute.amazonaws.com

启动aws的时候在key的folder, 使用kafka的时候要进入kafka的folder


cat logs/server.log
cat config/server.properties


1. ---------Connect to AWS EC2 for mac:
    https://aws.amazon.com/?nc2=h_home
    save .pem to file 
    go to the folder where you have your key saved
    use AWS key, (use chmod 400 kafka-stock-market-project.pem if neccessary)

2. ----------download all the required packages for the machine
        download kafka:  
            https://kafka.apache.org/downloads
            curl https://dlcdn.apache.org/kafka/4.1.0/kafka_2.13-4.1.0.tgz --output kafka.tgz
	        tar -xzf kafka.tgz
        download java:
            java -version
            sudo yum install java-17-amazon-corretto

3. start a kafka server
        cd xx
        KAFKA_CLUSTER_ID="$(bin/kafka-storage.sh random-uuid)"
        bin/kafka-storage.sh format --standalone -t $KAFKA_CLUSTER_ID -c config/server.properties
        bin/kafka-server-start.sh config/server.properties


5. ------- creat a topic
    bin/kafka-topics.sh --create --topic quickstart-events --bootstrap-server localhost:9092

    ------- start a producer
        bin/kafka-console-producer.sh --topic quickstart-events --bootstrap-server 16.171.181.77:9092

    ------- start a consumer
        bin/kafka-console-consumer.sh --topic quickstart-events --bootstrap-server localhost:9092

bin/kafka-topics.sh --bootstrap-server 16.171.181.77:9092 --list


------------ transfer your python script
transfer local files to cloud:
    scp -i kafka-stock.pem kafkaProducer.py ec2-user@16.170.201.99:~






install Airflow

pip install --upgrade --force-reinstall \
  "apache-airflow==3.0.6" \
  --constraint "https://raw.githubusercontent.com/apache/airflow/constraints-3.0.6/constraints-3.9.txt"
which airflow

standalone | Password for the admin user has been previously generated in /home/ec2-user/airflow/simple_auth_manager_passwords.json.generated. Not echoing it here.

[ec2-user@ip-172-31-34-154 ~]$ cat /home/ec2-user/airflow/simple_auth_manager_passwords.json.generated
{"admin": "C6CKSSBXV2vTfuth"}